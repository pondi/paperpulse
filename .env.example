APP_NAME=PaperPulse
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=https://paperpulse.test

LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=redis
CACHE_STORE=redis
SESSION_DRIVER=database

VITE_APP_NAME="${APP_NAME}"

# Database Configuration
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=paperpulse
DB_USERNAME=root
DB_PASSWORD=

# Redis Configuration
# IMPORTANT: Always set a strong password in production
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=
REDIS_PORT=6379
REDIS_CLIENT=phpredis

# Mail Configuration
MAIL_MAILER=smtp
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=${APP_NAME}
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

# AWS SES Configuration (separate from S3 storage)
AWS_SES_ACCESS_KEY_ID=your-ses-access-key
AWS_SES_SECRET_ACCESS_KEY=your-ses-secret-key
AWS_SES_DEFAULT_REGION=us-east-1

# AI Configuration
# Primary provider: 'openai' or 'anthropic'
AI_PROVIDER=openai

# OpenAI Configuration
# Get your API key from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...your-openai-api-key
OPENAI_ORGANIZATION=

# AI Model Configuration - OpenAI Latest Models
AI_MODEL_RECEIPT=gpt-4.1-mini
AI_MODEL_DOCUMENT=gpt-4.1
AI_MODEL_SUMMARY=gpt-4.1-mini
AI_MODEL_CLASSIFICATION=gpt-4.1-mini
AI_MODEL_ENTITY=gpt-4.1-mini
AI_MODEL_PREMIUM=gpt-5

# Anthropic Configuration (optional)
ANTHROPIC_API_KEY=sk-ant-...your-anthropic-api-key
AI_MODEL_ANTHROPIC_RECEIPT=claude-3.7-sonnet
AI_MODEL_ANTHROPIC_DOCUMENT=claude-4-opus
AI_MODEL_ANTHROPIC_SUMMARY=claude-3.7-sonnet
AI_MODEL_ANTHROPIC_PREMIUM=claude-4-opus

# AWS Textract Configuration (separate from S3 and SES)
# Use IAM user with minimal Textract permissions only
AWS_TEXTRACT_ACCESS_KEY_ID=your-textract-access-key
AWS_TEXTRACT_SECRET_ACCESS_KEY=your-textract-secret-key
AWS_TEXTRACT_DEFAULT_REGION=eu-central-1
TEXTRACT_BUCKET=your-textract-bucket
TEXTRACT_DISK=textract
TEXTRACT_VERSION=2018-06-27
TEXTRACT_TIMEOUT=120
TEXTRACT_POLLING_INTERVAL=10

# Textract Mode Configuration
TEXTRACT_RECEIPT_MODE=single_page_dense
TEXTRACT_DOCUMENT_MODE=multi_page_layout

# OCR Configuration
OCR_PROVIDER=textract
OCR_FALLBACK_PROVIDERS=tesseract
OCR_CACHE_RESULTS=true
OCR_CACHE_DURATION=7
OCR_RETRY_ATTEMPTS=2
OCR_RETRY_DELAY=1000
OCR_MIN_CONFIDENCE=0.8

# Tesseract Configuration (Future)
TESSERACT_ENDPOINT=http://tesseract-service:8080
TESSERACT_API_KEY=
TESSERACT_TIMEOUT=60
TESSERACT_LANGUAGE=nor+eng
TESSERACT_PSM=3
TESSERACT_OEM=3

# S3 Storage Configuration - Dual Bucket Setup (separate from SES and Textract)
# IMPORTANT: Both buckets must use S3 storage driver for all features to work
# Incoming bucket: For PulseDav uploads (temporary storage) - used by 'pulsedav' disk
AWS_INCOMING_BUCKET=paperpulse-incoming
# Storage bucket: For permanent file storage - used by 'paperpulse' disk
AWS_BUCKET=paperpulse-storage
# AWS S3 credentials (used for both buckets, can be different provider)
AWS_S3_ACCESS_KEY_ID=your-s3-access-key
AWS_S3_SECRET_ACCESS_KEY=your-s3-secret-key
AWS_S3_DEFAULT_REGION=us-east-1
# Optional: Custom endpoint for S3-compatible services (e.g., DigitalOcean Spaces)
AWS_S3_URL=
AWS_S3_ENDPOINT=
AWS_S3_USE_PATH_STYLE_ENDPOINT=false


# Search Configuration
SCOUT_DRIVER=meilisearch
MEILISEARCH_HOST=http://127.0.0.1:7700
MEILISEARCH_KEY=LARAVEL-HERD
MEILISEARCH_NO_ANALYTICS=false
MEILISEARCH_ENV=development

# PulseDav Integration
PULSEDAV_AUTH_ENABLED=true
AWS_S3_INCOMING_PREFIX=incoming/
DEFAULT_PULSEDAV_TYPE=receipt

# Document Processing Configuration
MAX_DOCUMENT_SIZE=50
MAX_RECEIPT_SIZE=10
SUPPORTED_DOCUMENT_FORMATS="doc,docx,xls,xlsx,ppt,pptx,odt,ods,odp,pdf,rtf"
SUPPORTED_RECEIPT_FORMATS="jpg,jpeg,png,gif,bmp,pdf"

# Horizon Configuration
HORIZON_PREFIX=horizon:
HORIZON_DOMAIN=
HORIZON_PATH=horizon

# Job Processing
JOB_TIMEOUT=3600
JOB_RETRIES=5
JOB_BACKOFF=10

# Rate Limiting Configuration
RATE_LIMIT_FILE_UPLOADS=10
RATE_LIMIT_PULSEDAV_AUTH=10
RATE_LIMIT_API_REQUESTS=60
RATE_LIMIT_EXPORT_REQUESTS=10

# AI Performance Settings
AI_MAX_TOKENS_RECEIPT=2048
AI_MAX_TOKENS_DOCUMENT=3000
AI_MAX_TOKENS_SUMMARY=300
AI_TEMPERATURE_RECEIPT=0.1
AI_TEMPERATURE_DOCUMENT=0.2
AI_TEMPERATURE_CREATIVE=0.7

# AI Provider Settings
AI_PROVIDER=openai
AI_FALLBACK_PROVIDERS=anthropic,openai
AI_MAX_RETRIES=3
AI_RETRY_DELAY=1500
AI_TIMEOUT=120

# AI Feature Flags
AI_AUTO_CATEGORIZATION=true
AI_AUTO_TAGGING=true
AI_ENTITY_EXTRACTION=true
AI_SUMMARY_GENERATION=true
AI_MERCHANT_MATCHING=true

# Receipt Scanner Configuration
USE_FORGIVING_NUMBER_PARSER=true

# Error Handling and Resilience
AI_CIRCUIT_BREAKER_ENABLED=true
AI_FALLBACKS_ENABLED=true
AI_GRACEFUL_DEGRADATION=true

# Circuit Breaker Configuration
AI_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
AI_CIRCUIT_BREAKER_TIMEOUT=300
AI_CIRCUIT_BREAKER_OPENAI_TIMEOUT=300
AI_CIRCUIT_BREAKER_ANTHROPIC_TIMEOUT=300

# Fallback Chains (comma-separated)
AI_FALLBACK_CHAIN_RECEIPT=openai,anthropic
AI_FALLBACK_CHAIN_DOCUMENT=anthropic,openai
AI_FALLBACK_CHAIN_SUMMARY=openai,anthropic
AI_FALLBACK_CHAIN_CLASSIFICATION=openai,anthropic
AI_FALLBACK_CHAIN_ENTITIES=anthropic,openai
AI_FALLBACK_CHAIN_TAGS=openai,anthropic

# Health Monitoring
AI_HEALTH_MONITORING=true
AI_HEALTH_CHECK_INTERVAL=300
AI_ERROR_RATE_THRESHOLD=0.2
AI_RESPONSE_TIME_THRESHOLD=30000
AI_AVAILABILITY_THRESHOLD=0.95
AI_ALERT_CHANNELS=log,notification

# Graceful Degradation
AI_GRACEFUL_DEGRADATION=true
AI_USE_BASIC_ANALYSIS=true
AI_PATTERN_MATCHING=true