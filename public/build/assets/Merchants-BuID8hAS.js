import{r as m,d as i,a as n,j as s,u as o,Z as C,w as l,b as e,F as v,e as S,l as b,t as g,G,i as w,m as y,k as _,h as R}from"./app-ifJRh6KD.js";import{g as V,c as N,M as T,d as M,S as $,Y as z,h as L,G as B,V as I,_ as A}from"./AuthenticatedLayout-BSqnk0kP.js";import{r as D}from"./EllipsisHorizontalIcon-BfYzVtMq.js";import{a as P,r as O}from"./XMarkIcon-D3g3yCxZ.js";import"./ApplicationLogo-MxaaLDVg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CheckCircleIcon-YUPfUU4_.js";const Y={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},E={key:0,role:"list",class:"grid grid-cols-1 gap-x-6 gap-y-8 lg:grid-cols-3 xl:gap-x-8"},J={class:"flex items-center gap-x-4 border-b border-gray-900/5 bg-gray-50 dark:bg-gray-800 p-6"},Z={class:"flex-1 flex items-center min-w-0 gap-x-4"},H=["src","alt"],K={key:0,class:"text-sm font-medium leading-6 text-gray-900 dark:text-gray-100 truncate"},Q={key:1,class:"sr-only"},W={class:"sr-only"},X=["onClick"],ee={class:"sr-only"},te={class:"-my-3 divide-y divide-gray-100 dark:divide-gray-700 px-6 py-4 text-sm leading-6"},se={class:"flex justify-between gap-x-4 py-3"},ae={class:"text-gray-700 dark:text-gray-300"},oe=["datetime"],le={class:"flex justify-between gap-x-4 py-3"},re={class:"text-gray-900 dark:text-gray-100 font-medium"},ie={key:1,class:"bg-gray-900 px-6 py-24 sm:py-32 lg:px-8"},ne={class:"mx-auto max-w-2xl text-center"},de={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},ge={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ue={class:"mt-3 text-center sm:mt-5"},ce={class:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 dark:border-gray-700 px-6 py-10"},me={class:"text-center"},ye={class:"mt-4 flex text-sm leading-6 text-gray-600 dark:text-gray-400"},pe={for:"logo-upload",class:"relative cursor-pointer rounded-md bg-white dark:bg-gray-800 font-semibold text-indigo-600 dark:text-indigo-400 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500"},fe={key:1,class:"flex flex-col items-center"},xe={class:"relative"},ve=["src"],be={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},he={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},ke=["disabled"],Se={__name:"Merchants",props:{merchants:{type:Array,required:!0}},setup(h){const p=m(!1),c=m(null),d=m(null),f=m(null),U=r=>{c.value=r,p.value=!0},F=r=>{const t=r.target.files[0];if(t){d.value=t;const a=new FileReader;a.onload=u=>{f.value=u.target.result},a.readAsDataURL(t)}},k=()=>{d.value=null,f.value=null},x=()=>{p.value=!1,c.value=null,k()},j=()=>{if(!d.value||!c.value)return;const r=new FormData;r.append("logo",d.value),R.post(route("merchants.updateLogo",c.value.id),r,{onSuccess:()=>{x()}})};return(r,t)=>(n(),i(v,null,[s(o(C),{title:"Merchants"}),s(A,null,{header:l(()=>t[0]||(t[0]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Merchants",-1)])),default:l(()=>[e("div",Y,[e("div",q,[h.merchants.length>0?(n(),i("ul",E,[(n(!0),i(v,null,S(h.merchants,a=>(n(),i("li",{key:a.id,class:"overflow-hidden rounded-xl border border-gray-200 dark:border-gray-700"},[e("div",J,[e("div",Z,[e("img",{src:a.imageUrl,alt:a.name,class:b(["rounded-lg bg-white dark:bg-gray-700 object-contain ring-1 ring-gray-900/10 dark:ring-gray-700",a.imageUrl.includes("ui-avatars.com")?"h-12 w-12 flex-none":"h-12 w-full flex-1"])},null,10,H),a.imageUrl.includes("ui-avatars.com")?(n(),i("div",K,g(a.name),1)):(n(),i("div",Q,g(a.name),1))]),s(o(V),{as:"div",class:"relative flex-none"},{default:l(()=>[s(o(N),{class:"-m-2.5 block p-2.5 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},{default:l(()=>[t[1]||(t[1]=e("span",{class:"sr-only"},"Open options",-1)),s(o(D),{class:"h-5 w-5","aria-hidden":"true"})]),_:1}),s(G,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:l(()=>[s(o(T),{class:"absolute right-0 z-10 mt-0.5 w-32 origin-top-right rounded-md bg-white dark:bg-gray-800 py-2 shadow-lg ring-1 ring-gray-900/5 dark:ring-gray-700 focus:outline-none"},{default:l(()=>[s(o(M),null,{default:l(({active:u})=>[s(o(w),{href:r.route("receipts.byMerchant",a.id),class:b([u?"bg-gray-50 dark:bg-gray-700":"","block px-3 py-1 text-sm leading-6 text-gray-900 dark:text-gray-100"])},{default:l(()=>[t[2]||(t[2]=y(" View Receipts")),e("span",W,", "+g(a.name),1)]),_:2},1032,["href","class"])]),_:2},1024),s(o(M),null,{default:l(({active:u})=>[e("button",{onClick:we=>U(a),class:b([u?"bg-gray-50 dark:bg-gray-700":"","block w-full px-3 py-1 text-left text-sm leading-6 text-gray-900 dark:text-gray-100"])},[t[3]||(t[3]=y(" Update Logo")),e("span",ee,", "+g(a.name),1)],10,X)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),e("dl",te,[e("div",se,[t[4]||(t[4]=e("dt",{class:"text-gray-500 dark:text-gray-400"},"Last Receipt",-1)),e("dd",ae,[e("time",{datetime:a.lastInvoice.dateTime},g(a.lastInvoice.date),9,oe)])]),e("div",le,[t[5]||(t[5]=e("dt",{class:"text-gray-500 dark:text-gray-400"},"Total Amount",-1)),e("dd",re,g(a.lastInvoice.amount),1)])])]))),128))])):(n(),i("div",ie,[e("div",ne,[t[7]||(t[7]=e("p",{class:"text-base/7 font-semibold text-indigo-600"},"No merchants found",-1)),t[8]||(t[8]=e("h2",{class:"text-5xl font-semibold tracking-tight text-white sm:text-7xl"},"Upload your first receipt",-1)),t[9]||(t[9]=e("p",{class:"mt-6 text-lg leading-8 text-gray-300"},"Merchants will appear here after you upload your first receipt.",-1)),s(o(w),{href:r.route("documents.upload"),class:"rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},{default:l(()=>t[6]||(t[6]=[y(" Upload Receipts ")])),_:1},8,["href"])])]))])]),s(o($),{appear:"",show:p.value,as:"template"},{default:l(()=>[s(o(z),{as:"div",onClose:x,class:"relative z-10"},{default:l(()=>[s(o(L),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>t[10]||(t[10]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1}),e("div",de,[e("div",ge,[s(o(L),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:l(()=>[s(o(B),{class:"relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},{default:l(()=>[e("div",null,[e("div",ue,[s(o(I),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-100"},{default:l(()=>t[11]||(t[11]=[y(" Update Merchant Logo ")])),_:1}),t[12]||(t[12]=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Upload a new logo for this merchant. The logo will be displayed on all receipts and in the merchant list. ")],-1))]),e("form",{onSubmit:_(j,["prevent"]),class:"mt-5 sm:mt-6"},[e("div",ce,[e("div",me,[d.value?(n(),i("div",fe,[e("div",xe,[e("img",{src:f.value,class:"h-32 w-32 object-contain rounded-lg border border-gray-200 dark:border-gray-700",alt:"Logo preview"},null,8,ve),e("button",{onClick:_(k,["prevent"]),class:"absolute -top-2 -right-2 rounded-full bg-red-100 dark:bg-red-900 p-1 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-800"},[t[16]||(t[16]=e("span",{class:"sr-only"},"Remove file",-1)),s(o(O),{class:"h-4 w-4"})])]),e("span",be,g(d.value.name),1)])):(n(),i(v,{key:0},[s(o(P),{class:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),e("div",ye,[e("label",pe,[t[13]||(t[13]=e("span",null,"Upload a file",-1)),e("input",{onChange:F,id:"logo-upload",name:"logo-upload",type:"file",class:"sr-only",accept:"image/*"},null,32)]),t[14]||(t[14]=e("p",{class:"pl-1"},"or drag and drop",-1))]),t[15]||(t[15]=e("p",{class:"text-xs leading-5 text-gray-600 dark:text-gray-400"},"PNG, JPG, GIF up to 2MB",-1))],64))])]),e("div",he,[e("button",{type:"submit",class:"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:col-start-2",disabled:!d.value}," Upload ",8,ke),e("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md bg-white dark:bg-gray-800 px-3 py-2 text-sm font-semibold text-gray-900 dark:text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 sm:col-start-1 sm:mt-0",onClick:x}," Cancel ")])],32)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]),_:1})],64))}};export{Se as default};
