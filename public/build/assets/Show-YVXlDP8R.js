import{d as i,a as r,b as e,Q as T,r as h,q as z,y as G,h as C,j as d,u,Z as W,w as j,l as N,t as n,c as B,m as b,F as p,e as k,g as q,p as L,L as F,v as X,k as Y,i as ee}from"./app-ifJRh6KD.js";import{_ as te}from"./AuthenticatedLayout-BSqnk0kP.js";import{_ as se}from"./Modal-CI92Gp6x.js";import{r as oe,a as ne}from"./PlusIcon-F1r9pOsT.js";import{r as re}from"./ExclamationCircleIcon-DRwAuq-f.js";import"./ApplicationLogo-MxaaLDVg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CheckCircleIcon-YUPfUU4_.js";function ie(l,c){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function ae(l,c){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function le(l,c){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function O(l,c){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 9.75h4.875a2.625 2.625 0 0 1 0 5.25H12M8.25 9.75 10.5 7.5M8.25 9.75 10.5 12m9-7.243V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0c1.1.128 1.907 1.077 1.907 2.185Z"})])}const ce={class:"flex justify-between items-center"},de={class:"font-semibold text-xl text-gray-200 leading-tight flex items-center gap-x-2"},ue={class:"flex items-center gap-x-4"},ye={class:"flex h-[calc(100vh-9rem)] overflow-hidden"},ge={class:"w-1/2 p-6 overflow-y-auto border-r border-gray-700"},me={class:"space-y-8"},pe={class:"bg-gray-800 rounded-lg p-6"},fe={class:"flex items-center justify-between"},xe={class:"flex items-center gap-x-3"},_e={class:"text-lg font-medium text-gray-200"},he={class:"mt-6 space-y-6"},ve={class:"text-sm font-medium text-gray-500"},be={key:0,class:"mt-1 text-sm text-gray-200"},ke={key:1,class:"mt-1"},we=["onUpdate:modelValue","type"],Ce=["onUpdate:modelValue"],je=["value"],Ve={class:"bg-gray-800 rounded-lg p-6"},$e={class:"flex items-center justify-between mb-6"},Ie={class:"text-lg font-medium text-gray-200"},ze={class:"overflow-x-auto"},Ne={class:"min-w-full divide-y divide-gray-700"},qe={class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},Le={class:"sr-only"},Me={class:"divide-y divide-gray-700"},Be={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-300"},Fe={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-300"},Oe={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-300"},Se={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-300"},Ue={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-300"},De={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},Ee={class:"flex items-center justify-end gap-x-2"},He=["onClick"],Ae=["onClick"],Ze={class:"w-1/2 bg-gray-900 overflow-hidden"},Je={class:"h-full flex items-center justify-center relative"},Ke={class:"w-full h-full overflow-y-auto"},Pe=["src","alt"],Qe={key:0,class:"flex flex-col items-center justify-center h-full"},Re={class:"text-sm text-gray-400"},Te={key:1,class:"flex flex-col items-center justify-center h-full"},Ge={class:"text-sm text-gray-500"},We={key:0,class:"absolute bottom-6 right-6"},Xe={class:"p-6"},Ye={class:"text-lg font-medium text-gray-200 mb-5"},et=["for"],tt=["id","onUpdate:modelValue","type"],st={class:"mt-6 flex items-center justify-end gap-x-4"},ot={type:"submit",class:"inline-flex justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},yt={__name:"Show",props:{receipt:{type:Object,required:!0}},setup(l){const c=l,S=T(),t=o=>{var a,y;return((y=(a=S.props.language)==null?void 0:a.messages)==null?void 0:y[o])||o},g=h(!1),w=h(!1),f=h(null),V=h(!1),x=h({...c.receipt}),_=h({text:"",sku:"",qty:1,price:0,total:0}),$=(o,a)=>o?new Intl.NumberFormat("nb-NO",{style:"currency",currency:a||"NOK"}).format(o):"0,00",U=o=>o?new Date(o).toLocaleDateString("nb-NO"):t("no_date"),D=(o,a)=>{if(o==null)return"-";switch(a){case"date":return U(o);case"number":return $(o,c.receipt.currency);default:return o}},E=z(()=>[{key:"receipt_date",label:t("date"),type:"date"},{key:"total_amount",label:t("total_amount"),type:"number"},{key:"tax_amount",label:t("tax_amount"),type:"number"},{key:"currency",label:t("currency"),type:"text"},{key:"receipt_category",label:t("category"),type:"select",options:[{value:"mat",label:t("food")},{value:"transport",label:t("transport")},{value:null,label:t("uncategorized")}]},{key:"receipt_description",label:t("description"),type:"text"}]),H=z(()=>[{key:"text",label:t("description"),type:"text"},{key:"sku",label:t("sku"),type:"text"},{key:"qty",label:t("quantity"),type:"number"},{key:"price",label:t("unit_price"),type:"number"},{key:"total",label:t("total"),type:"number"}]),A=z(()=>[{key:"text",label:t("description")},{key:"sku",label:t("sku")},{key:"qty",label:t("quantity")},{key:"price",label:t("unit_price")},{key:"total",label:t("total")}]),Z=o=>o!=null&&o.merchant_id?(o==null?void 0:o.total_amount)===null?"text-rose-400 bg-rose-400/10":"text-green-400 bg-green-400/10":"text-gray-500 bg-gray-100/10",J=o=>window.open(o,"_blank","noopener,noreferrer"),K=()=>V.value=!0,P=o=>{f.value=o,_.value={...o},w.value=!0},I=()=>{w.value=!1,f.value=null,_.value={text:"",sku:"",qty:1,price:0,total:0}},Q=()=>{f.value?C.patch(route("receipts.line-items.update",[c.receipt.id,f.value.id]),_.value):C.post(route("receipts.line-items.store",c.receipt.id),_.value),I()},R=o=>{confirm(t("confirm_delete_line_item"))&&C.delete(route("receipts.line-items.destroy",[c.receipt.id,o]))};return G(g,o=>{!o&&JSON.stringify(c.receipt)!==JSON.stringify(x.value)&&C.patch(route("receipts.update",c.receipt.id),x.value)}),(o,a)=>(r(),i(p,null,[d(u(W),{title:t("receipt_details")},null,8,["title"]),d(te,null,{header:j(()=>{var y;return[e("div",ce,[e("h2",de,[d(u(O),{class:"size-6"}),b(" "+n(((y=l.receipt.merchant)==null?void 0:y.name)||t("unknown_merchant")),1)]),e("div",ue,[d(u(ee),{href:o.route("receipts.index"),class:"inline-flex items-center gap-x-2 px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},{default:j(()=>[d(u(ie),{class:"size-4"}),b(" "+n(t("back_to_overview")),1)]),_:1},8,["href"])])])]}),default:j(()=>{var y,M;return[e("div",ye,[e("div",ge,[e("div",me,[e("div",pe,[e("div",fe,[e("div",xe,[e("div",{class:N([Z(l.receipt),"flex-none rounded-full p-1"])},a[3]||(a[3]=[e("div",{class:"size-2 rounded-full bg-current"},null,-1)]),2),e("h3",_e,n(t("receipt_status")),1)]),e("button",{onClick:a[0]||(a[0]=s=>g.value=!g.value),class:N(["inline-flex items-center gap-x-2 px-3 py-2 text-sm font-semibold rounded-md",g.value?"text-gray-900 bg-gray-100 hover:bg-gray-200":"text-gray-100 bg-gray-700 hover:bg-gray-600"])},[g.value?(r(),B(u(ae),{key:1,class:"size-4"})):(r(),B(u(oe),{key:0,class:"size-4"})),b(" "+n(g.value?t("save_changes"):t("edit_receipt")),1)],2)]),e("dl",he,[(r(!0),i(p,null,k(E.value,(s,v)=>(r(),i("div",{key:v,class:"flex flex-col"},[e("dt",ve,n(s.label),1),g.value?(r(),i("div",ke,[s.type==="text"||s.type==="number"||s.type==="date"?q((r(),i("input",{key:0,"onUpdate:modelValue":m=>x.value[s.key]=m,type:s.type,class:"block w-full rounded-md border-0 bg-gray-700 text-gray-200 shadow-sm ring-1 ring-inset ring-gray-600 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm"},null,8,we)),[[F,x.value[s.key]]]):s.type==="select"?q((r(),i("select",{key:1,"onUpdate:modelValue":m=>x.value[s.key]=m,class:"block w-full rounded-md border-0 bg-gray-700 text-gray-200 shadow-sm ring-1 ring-inset ring-gray-600 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm"},[(r(!0),i(p,null,k(s.options,m=>(r(),i("option",{key:m.value,value:m.value},n(m.label),9,je))),128))],8,Ce)),[[X,x.value[s.key]]]):L("",!0)])):(r(),i("dd",be,n(D(l.receipt[s.key],s.type)),1))]))),128))])]),e("div",Ve,[e("div",$e,[e("h3",Ie,n(t("line_items")),1),e("button",{onClick:a[1]||(a[1]=s=>w.value=!0),class:"inline-flex items-center gap-x-2 px-3 py-2 text-sm font-semibold text-gray-900 bg-gray-100 rounded-md hover:bg-gray-200"},[d(u(ne),{class:"size-4"}),b(" "+n(t("add_line_item")),1)])]),e("div",ze,[e("table",Ne,[e("thead",null,[e("tr",null,[(r(!0),i(p,null,k(A.value,s=>(r(),i("th",{key:s.key,class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-300"},n(s.label),1))),128)),e("th",qe,[e("span",Le,n(t("actions")),1)])])]),e("tbody",Me,[(r(!0),i(p,null,k(l.receipt.lineItems,s=>(r(),i("tr",{key:s.id,class:"hover:bg-gray-700/50"},[e("td",Be,n(s.text),1),e("td",Fe,n(s.sku),1),e("td",Oe,n(s.qty),1),e("td",Se,n($(s.price,l.receipt.currency)),1),e("td",Ue,n($(s.total,l.receipt.currency)),1),e("td",De,[e("div",Ee,[e("button",{onClick:v=>P(s),class:"text-indigo-400 hover:text-indigo-300"},n(t("edit")),9,He),e("button",{onClick:v=>R(s.id),class:"text-red-400 hover:text-red-300"},n(t("delete")),9,Ae)])])]))),128))])])])])])]),e("div",Ze,[e("div",Je,[e("div",Ke,[(y=l.receipt.file)!=null&&y.url?(r(),i(p,{key:0},[e("img",{src:l.receipt.file.url,class:N(["w-full h-auto",{hidden:V.value}]),alt:t("receipt_image"),onError:K},null,42,Pe),V.value?(r(),i("div",Qe,[d(u(re),{class:"size-16 text-red-400 mb-4"}),e("span",Re,n(t("receipt_image_load_error")),1)])):L("",!0)],64)):(r(),i("div",Te,[d(u(O),{class:"size-16 text-gray-600 mb-4"}),e("span",Ge,n(t("no_receipt_image")),1)]))]),(M=l.receipt.file)!=null&&M.pdfUrl?(r(),i("div",We,[e("button",{onClick:a[2]||(a[2]=s=>J(l.receipt.file.pdfUrl)),class:"inline-flex items-center gap-x-2 px-4 py-2 bg-gray-800 rounded-md text-sm font-semibold text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"},[d(u(le),{class:"size-5"}),b(" "+n(t("view_pdf")),1)])])):L("",!0)])])]),d(se,{show:w.value,onClose:I},{default:j(()=>[e("div",Xe,[e("h3",Ye,n(f.value?t("edit_line_item"):t("add_line_item")),1),e("form",{onSubmit:Y(Q,["prevent"]),class:"space-y-4"},[(r(!0),i(p,null,k(H.value,s=>(r(),i("div",{key:s.key,class:"space-y-1"},[e("label",{for:s.key,class:"block text-sm font-medium text-gray-300"},n(s.label),9,et),q(e("input",{id:s.key,"onUpdate:modelValue":v=>_.value[s.key]=v,type:s.type,class:"block w-full rounded-md border-0 bg-gray-700 text-gray-200 shadow-sm ring-1 ring-inset ring-gray-600 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm"},null,8,tt),[[F,_.value[s.key]]])]))),128)),e("div",st,[e("button",{type:"button",class:"text-sm font-semibold text-gray-300 hover:text-gray-100",onClick:I},n(t("cancel")),1),e("button",ot,n(f.value?t("save"):t("add")),1)])],32)])]),_:1},8,["show"])]}),_:1})],64))}};export{yt as default};
