import{d as l,a as i,b as t,r as w,B as S,T as M,y as T,j as p,u as o,Z as E,w as C,p as D,t as x,k as h,C as L,l as z,F as B,e as P,c as O,f as R}from"./app-ifJRh6KD.js";import{_ as Z}from"./AuthenticatedLayout-BSqnk0kP.js";import{r as _,a as I}from"./XMarkIcon-D3g3yCxZ.js";import"./ApplicationLogo-MxaaLDVg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CheckCircleIcon-YUPfUU4_.js";function N(k,m){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z","clip-rule":"evenodd"})])}function V(k,m){return i(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M3 3.5A1.5 1.5 0 0 1 4.5 2h6.879a1.5 1.5 0 0 1 1.06.44l4.122 4.12A1.5 1.5 0 0 1 17 7.622V16.5a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 3 16.5v-13Z"})])}function G(k={}){const{maxFileSize:m=10*1024*1024,allowedTypes:a=["application/pdf","image/png","image/jpeg","image/jpg"],onError:f=console.error}=k,u=w([]),y=w(!1);function b(e){if(e===0)return"0 Bytes";const s=1024,r=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,v)).toFixed(2))+" "+r[v]}function F(e){return e.size>m?(f(`File ${e.name} is too large. Maximum size is ${b(m)}`),!1):a.includes(e.type)?!0:(f(`File ${e.name} has an invalid type. Allowed types are: ${a.join(", ")}`),!1)}function j(e){return{file:e,preview:e.type.startsWith("image/")?URL.createObjectURL(e):null,name:e.name,size:b(e.size),type:e.type}}function c(e,s=!1){const r=Array.from(e).filter(A=>A.size>0&&F(A));if(r.length===0)return;const v=r.map(j);s?u.value=[...u.value,...v]:u.value=v}function g(e){var r;const s=e.target;(r=s.files)!=null&&r.length&&c(Array.from(s.files))}function U(e){var r;const s=e.target;(r=s.files)!=null&&r.length&&c(Array.from(s.files),!0)}function n(e){var s;y.value=!1,(s=e.dataTransfer)!=null&&s.files&&c(Array.from(e.dataTransfer.files),!0)}function $(e){const s=u.value[e];s.preview&&URL.revokeObjectURL(s.preview),u.value.splice(e,1)}function d(){u.value.forEach(e=>{e.preview&&URL.revokeObjectURL(e.preview)}),u.value=[]}return{selectedFiles:u,isDragging:y,handleDrop:n,handleFileSelect:g,handleAdditionalFiles:U,removeFile:$,resetFiles:d}}const W={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},J={key:0,class:"rounded-md bg-green-50 p-4 mb-4"},K={class:"flex"},X={key:1,class:"rounded-md bg-red-50 p-4 mb-4"},q={class:"flex"},H={class:"ml-3"},Q={class:"text-sm font-medium text-red-800"},ee={class:"bg-white dark:bg-gray-800 px-6 py-24 sm:py-32 rounded-lg shadow-sm"},te={class:"mx-auto max-w-2xl text-center"},se={key:0,class:"text-center"},oe={key:1,class:"w-full"},re={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ne={class:"flex-shrink-0 h-16 w-16 relative"},ie=["src"],le={class:"ml-4 flex-1 min-w-0"},ae={class:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate"},de={class:"text-sm text-gray-500 dark:text-gray-400"},ue=["onClick"],ge={class:"flex justify-center mt-4"},ce={class:"relative cursor-pointer rounded-md bg-white dark:bg-gray-800 font-semibold text-indigo-600 dark:text-indigo-400 hover:text-indigo-500"},pe={key:2,class:"absolute inset-x-0 bottom-0 p-4 bg-white dark:bg-gray-800 border-t dark:border-gray-700"},fe={class:"relative pt-1"},me={class:"flex mb-2 items-center justify-between"},ve={class:"text-right"},xe={class:"text-xs font-semibold inline-block text-indigo-600 dark:text-indigo-400"},he={class:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-indigo-200 dark:bg-indigo-900"},ye={class:"mt-6 flex justify-center"},be=["disabled"],we={key:0},ke={key:1},_e=10*1024*1024,Ce=S({__name:"Upload",setup(k){const m=["application/pdf","image/png","image/jpeg","image/jpg"],{selectedFiles:a,isDragging:f,handleDrop:u,handleFileSelect:y,handleAdditionalFiles:b,removeFile:F,resetFiles:j}=G({maxFileSize:_e,allowedTypes:m,onError:d=>{g.value=d,setTimeout(()=>{g.value=null},5e3)}}),c=w(!1),g=w(null),U=w(null),n=M({files:null});T(a,d=>{if(!d.length){n.files=null;return}const e=new DataTransfer;d.forEach(s=>e.items.add(s.file)),n.files=e.files},{deep:!0});async function $(){var d;if((d=n.files)!=null&&d.length)try{await n.post("/documents/store",{preserveScroll:!0,onSuccess:()=>{j(),n.reset(),c.value=!0,setTimeout(()=>{c.value=!1},5e3)},onError:e=>{g.value=Object.values(e)[0],setTimeout(()=>{g.value=null},5e3)},onProgress:e=>{e.total&&(n.progress={percentage:Math.round(e.loaded/e.total*100)})}})}catch{g.value="An unexpected error occurred during upload",setTimeout(()=>{g.value=null},5e3)}}return(d,e)=>(i(),l(B,null,[p(o(E),{title:"PaperPulse - Upload files"}),p(Z,null,{header:C(()=>e[9]||(e[9]=[t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Upload files",-1)])),default:C(()=>[t("div",W,[t("div",Y,[c.value?(i(),l("div",J,[t("div",K,[p(o(N),{class:"h-5 w-5 text-green-400","aria-hidden":"true"}),e[11]||(e[11]=t("div",{class:"ml-3"},[t("p",{class:"text-sm font-medium text-green-800"},"File uploaded successfully")],-1)),t("button",{type:"button",class:"ml-auto -mx-1.5 -my-1.5 rounded-md bg-green-50 p-1.5 text-green-500 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-offset-2",onClick:e[0]||(e[0]=s=>c.value=!1)},[e[10]||(e[10]=t("span",{class:"sr-only"},"Dismiss",-1)),p(o(_),{class:"h-5 w-5","aria-hidden":"true"})])])])):D("",!0),g.value?(i(),l("div",X,[t("div",q,[p(o(_),{class:"h-5 w-5 text-red-400","aria-hidden":"true"}),t("div",H,[t("p",Q,x(g.value),1)]),t("button",{type:"button",class:"ml-auto -mx-1.5 -my-1.5 rounded-md bg-red-50 p-1.5 text-red-500 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-600 focus:ring-offset-2",onClick:e[1]||(e[1]=s=>g.value=null)},[e[12]||(e[12]=t("span",{class:"sr-only"},"Dismiss",-1)),p(o(_),{class:"h-5 w-5","aria-hidden":"true"})])])])):D("",!0),t("div",ee,[t("div",te,[e[18]||(e[18]=t("h2",{class:"text-4xl font-semibold tracking-tight text-gray-900 dark:text-white sm:text-5xl"},"Upload Your Documents",-1)),e[19]||(e[19]=t("p",{class:"mt-6 text-lg leading-8 text-gray-600 dark:text-gray-400"}," Upload your receipts and documents. They will be automatically processed and organized for you. ",-1)),t("form",{class:"mt-10",ref_key:"fileUpload",ref:U,onSubmit:h($,["prevent"])},[t("div",L({class:["mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 dark:border-gray-700 px-6 py-10 relative",[{"cursor-pointer":o(a).length===0},{"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":o(f)}]],onClick:e[4]||(e[4]=s=>{var r;return o(a).length===0&&((r=d.$refs.fileInput)==null?void 0:r.click())})},d.$attrs,{onDrop:e[5]||(e[5]=h((...s)=>o(u)&&o(u)(...s),["prevent"])),onDragover:e[6]||(e[6]=h(()=>{},["prevent"])),onDragenter:e[7]||(e[7]=h(s=>f.value=!0,["prevent"])),onDragleave:e[8]||(e[8]=h(s=>f.value=!1,["prevent"]))}),[t("input",{ref:"fileInput",type:"file",multiple:"",class:"sr-only",onChange:e[2]||(e[2]=(...s)=>o(y)&&o(y)(...s)),accept:".pdf,.png,.jpg,.jpeg"},null,544),o(a).length===0?(i(),l("div",se,[p(o(I),{class:z(["mx-auto h-12 w-12",o(f)?"text-indigo-500":"text-gray-300"]),"aria-hidden":"true"},null,8,["class"]),e[13]||(e[13]=t("div",{class:"mt-4 flex text-sm leading-6 text-gray-600 dark:text-gray-400"},[t("span",{class:"relative rounded-md bg-white dark:bg-gray-800 font-semibold text-indigo-600 dark:text-indigo-400 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500"}," Upload files "),t("p",{class:"pl-1"},"or drag and drop")],-1)),e[14]||(e[14]=t("p",{class:"text-xs leading-5 text-gray-600 dark:text-gray-400"},"PDF, PNG, JPG up to 10MB",-1))])):(i(),l("div",oe,[t("div",re,[(i(!0),l(B,null,P(o(a),(s,r)=>(i(),l("div",{key:s.name+r,class:"relative flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},[t("div",ne,[s.preview?(i(),l("img",{key:0,src:s.preview,class:"h-16 w-16 object-cover rounded-lg",alt:"File preview"},null,8,ie)):(i(),O(o(V),{key:1,class:"h-16 w-16 text-gray-400"}))]),t("div",le,[t("p",ae,x(s.name),1),t("p",de,x(s.size),1)]),t("button",{onClick:h(v=>o(F)(r),["prevent"]),class:"ml-4 flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",type:"button"},[e[15]||(e[15]=t("span",{class:"sr-only"},"Remove file",-1)),p(o(_),{class:"h-5 w-5"})],8,ue)]))),128))]),t("div",ge,[t("label",ce,[e[16]||(e[16]=t("span",null,"Add more files",-1)),t("input",{type:"file",multiple:"",class:"sr-only",onChange:e[3]||(e[3]=(...s)=>o(b)&&o(b)(...s)),accept:".pdf,.png,.jpg,.jpeg"},null,32)])])])),o(n).progress?(i(),l("div",pe,[t("div",fe,[t("div",me,[e[17]||(e[17]=t("div",null,[t("span",{class:"text-xs font-semibold inline-block text-indigo-600 dark:text-indigo-400"}," Uploading ")],-1)),t("div",ve,[t("span",xe,x(o(n).progress.percentage)+"% ",1)])]),t("div",he,[t("div",{style:R({width:o(n).progress.percentage+"%"}),class:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-indigo-600 transition-all duration-300"},null,4)])])])):D("",!0)],16),t("div",ye,[t("button",{type:"submit",disabled:o(a).length===0||o(n).processing,class:z(["rounded-md px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 transition-colors duration-200",o(a).length===0||o(n).processing?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-500"])},[o(n).processing?(i(),l("span",we,"Uploading...")):(i(),l("span",ke,"Upload "+x(o(a).length)+" "+x(o(a).length===1?"file":"files"),1))],10,be)])],544)])])])])]),_:1})],64))}});export{Ce as default};
